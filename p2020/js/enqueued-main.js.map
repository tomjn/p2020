{"version":3,"sources":["init.js","mobile-menu.js","dynamic-new-post-editor.js","fixed-toolbar.js","mobile-new-post.js","subscribe-to-comments.js","polyfills-nonblocking.js","unfiltered-home.js"],"names":["$","hasClass","addClass","window","tippy","jQuery","moveNavIntoSidebar","$menu","length","parents","prependTo","wrap","moveNavOutOfSidebar","appendTo","remove","document","ready","click","toggleClass","enquire","register","match","unmatch","editor","querySelector","$editorFooter","blockListLayoutSelector","editorExpandedModifier","newPostContentKey","_currentSiteId","isEditorEmpty","editorContent","localStorage","getItem","shouldExpandEditor","contains","activeElement","handleFocusChange","show","hide","removeClass","addEventListener","enableFixedToolbarByDefault","rawSettings","settings","JSON","parse","fixedToolbar","undefined","setItem","stringify","$editor","$controls","btnNew","find","btnCancel","before","css","slideDown","slideUp","subscribeToCommentsOnNewPostsByDefault","prop","getScript","Modernizr","focuswithin","isInCustomizer","wp","customize","location","pathname","search"],"mappings":"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","file":"enqueued-main.js","sourcesContent":["( function( $ ) {\n\t// Only do this once\n\tif ( $( 'body' ).hasClass( 'p2020-js-loaded' ) ) {\n\t\treturn;\n\t}\n\n\t$( 'body' ).addClass( 'p2020-js-loaded' );\n\n\t// Initialize tippy.js tooltips\n\twindow.tippy( '[data-tippy-content]' );\n} )( jQuery );\n","// TODO: Test and clean up for P2020\n\n( function( $ ) {\n\tfunction moveNavIntoSidebar() {\n\t\tconst $menu = $( 'nav#site-navigation' );\n\t\tif ( $menu.length && $menu.parents( 'header#masthead' ).length ) {\n\t\t\t$menu.prependTo( '#sidebar' );\n\t\t\t$menu.wrap(\n\t\t\t\t'<aside class=\"widget\" id=\"o2-responsive-nav\"></aside>'\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction moveNavOutOfSidebar() {\n\t\tconst $menu = $( 'nav#site-navigation' );\n\t\tif ( $menu.length && 0 === $menu.parents( 'header#masthead' ).length ) {\n\t\t\t$( 'nav#site-navigation' ).appendTo( 'header#masthead' );\n\t\t\t$( '#o2-responsive-nav' ).remove();\n\t\t}\n\t}\n\n\t$( document ).ready( function() {\n\t\t$( '[data-mobile-menu-toggle]' ).click( function() {\n\t\t\t$( 'body' ).toggleClass( 'mobile-menu-is-visible' );\n\t\t} );\n\n\t\tif ( 'undefined' !== typeof enquire ) {\n\t\t\t// \"Tablet\" max-width also defined in css/src/global/_variables.scss\n\t\t\tenquire.register( 'screen and (max-width:876px)', {\n\t\t\t\tmatch() {\n\t\t\t\t\tmoveNavIntoSidebar();\n\t\t\t\t},\n\n\t\t\t\tunmatch() {\n\t\t\t\t\tmoveNavOutOfSidebar();\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\t} );\n} )( jQuery );\n","/**\n * Only show the editor footer when the editor is active or has content.\n */\n( function( $ ) {\n\t$( document ).ready( () => {\n\t\t/**\n\t\t * Selectors\n\t\t */\n\t\tconst editor = document.querySelector( '.o2-app-new-post' );\n\t\tif ( editor === null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst $editorFooter = $( '.o2-app-new-post .o2-editor-footer' );\n\t\tconst blockListLayoutSelector = '.block-editor-block-list__layout';\n\t\tconst editorExpandedModifier = 'is-expanded';\n\n\t\t/**\n\t\t * Local Storage Keys\n\t\t */\n\t\tconst newPostContentKey = `${ window._currentSiteId }-new`;\n\n\t\t/**\n\t\t * Functions\n\t\t */\n\t\tconst isEditorEmpty = () => {\n\t\t\tconst editorContent = window.localStorage.getItem(\n\t\t\t\tnewPostContentKey\n\t\t\t);\n\t\t\treturn editorContent === '';\n\t\t};\n\n\t\tconst shouldExpandEditor = () =>\n\t\t\teditor.contains( document.activeElement ) || ! isEditorEmpty();\n\n\t\tconst handleFocusChange = () => {\n\t\t\tif ( shouldExpandEditor() ) {\n\t\t\t\t$editorFooter.show();\n\t\t\t\t$( blockListLayoutSelector ).addClass( editorExpandedModifier );\n\t\t\t} else {\n\t\t\t\t$editorFooter.hide();\n\t\t\t\t$( blockListLayoutSelector ).removeClass(\n\t\t\t\t\teditorExpandedModifier\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Main\n\t\t */\n\t\tif ( isEditorEmpty() ) {\n\t\t\t$editorFooter.hide();\n\t\t}\n\n\t\tif ( editor ) {\n\t\t\teditor.addEventListener( 'focus', handleFocusChange, true );\n\t\t\teditor.addEventListener( 'blur', handleFocusChange, true );\n\t\t}\n\t} );\n} )( jQuery );\n","( function() {\n\t// Enable the fixed toolbar feature if not explicitly disabled\n\tfunction enableFixedToolbarByDefault() {\n\t\tconst rawSettings = window.localStorage.getItem( 'p2tenberg_features' );\n\t\tconst settings = rawSettings ? JSON.parse( rawSettings ) : {};\n\n\t\tif ( settings.fixedToolbar === undefined ) {\n\t\t\twindow.localStorage.setItem(\n\t\t\t\t'p2tenberg_features',\n\t\t\t\tJSON.stringify( {\n\t\t\t\t\t...settings,\n\t\t\t\t\tfixedToolbar: true,\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\t}\n\n\t// No need to wait for document ready\n\tenableFixedToolbarByDefault();\n} )();\n","( function( $ ) {\n\t$( document ).ready( () => {\n\t\tconst $editor = $( '.o2-app-new-post' );\n\t\tconst $controls = $( '[data-p2020-mobile-new-post-controls]' );\n\t\tconst btnNew = $controls.find( 'button' )[ 0 ];\n\t\tconst btnCancel = $controls.find( 'button' )[ 1 ];\n\n\t\t// When user is not logged in\n\t\tif ( $editor.length === 0 ) {\n\t\t\t$controls.hide();\n\t\t\treturn;\n\t\t}\n\n\t\t$editor.before( $controls );\n\t\t$controls.css( 'visibility', 'visible' ); // prevents FOUC before the DOM manipulation\n\n\t\tbtnNew.addEventListener( 'click', () => {\n\t\t\t$editor.slideDown( 'fast' );\n\t\t\t$( btnNew ).hide();\n\t\t\t$( btnCancel ).show();\n\t\t} );\n\n\t\tbtnCancel.addEventListener( 'click', () => {\n\t\t\t$editor.slideUp( 'fast' );\n\t\t\t$( btnCancel ).hide();\n\t\t\t$( btnNew ).show();\n\t\t} );\n\t} );\n} )( jQuery );\n","( function( $ ) {\n\t// Enable \"Notify me of new comments via email\" on new posts by default and hide the form\n\tfunction subscribeToCommentsOnNewPostsByDefault() {\n\t\t$( 'input[type=\"checkbox\"]#post_subscribe' ).prop( 'checked', true );\n\t\t$( '.o2-post-form-options' ).hide();\n\t}\n\n\t$( document ).ready( () => {\n\t\tsubscribeToCommentsOnNewPostsByDefault();\n\t} );\n} )( jQuery );\n","// Polyfills for things that don't need to block the rest of the JS\n\n( function( $ ) {\n\t$( document ).ready( () => {\n\t\t// CSS :focus-visible\n\t\t$.getScript( 'https://unpkg.com/focus-visible' );\n\n\t\t// CSS :focus-within\n\t\tif ( ! Modernizr.focuswithin ) {\n\t\t\t$.getScript( 'https://unpkg.com/focus-within-polyfill' );\n\t\t}\n\t} );\n} )( jQuery );\n","( function( $ ) {\n\tfunction isInCustomizer() {\n\t\treturn !! wp.customize;\n\t}\n\n\t$( document ).ready( function() {\n\t\t// Is home page and not displaying O2 filtered content\n\t\tif (\n\t\t\tisInCustomizer() ||\n\t\t\t( window.location.pathname === '/' &&\n\t\t\t\twindow.location.search === '' )\n\t\t) {\n\t\t\t$( '.o2-app-page-title' ).addClass( 'is-unfiltered-home' );\n\t\t}\n\t} );\n} )( jQuery );\n"]}