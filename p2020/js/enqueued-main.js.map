{"version":3,"sources":["init.js","init-tippy.js","mobile-menu.js","dynamic-new-post-editor.js","fixed-toolbar.js","mobile-new-post.js","subscribe-to-comments.js","polyfills-nonblocking.js","single-page-title.js","unfiltered-home.js"],"names":["$","hasClass","addClass","jQuery","document","ready","window","tippy","theme","duration","moveNavIntoSidebar","$menu","length","parents","prependTo","wrap","moveNavOutOfSidebar","appendTo","remove","click","toggleClass","enquire","register","match","unmatch","editor","querySelector","$editorFooter","blockListLayoutSelector","editorExpandedModifier","newPostContentKey","_currentSiteId","isEditorEmpty","editorContent","localStorage","getItem","shouldExpandEditor","contains","activeElement","handleFocusChange","show","hide","removeClass","addEventListener","enableFixedToolbarByDefault","rawSettings","settings","JSON","parse","fixedToolbar","undefined","setItem","stringify","$editor","$controls","btnNew","find","btnCancel","before","css","slideDown","slideUp","subscribeToCommentsOnNewPostsByDefault","prop","getScript","Modernizr","focuswithin","isSinglePage","title","text","prepend","class","isInCustomizer","wp","customize","location","pathname","search"],"mappings":"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","file":"enqueued-main.js","sourcesContent":["( function( $ ) {\n\t// Only do this once\n\tif ( $( 'body' ).hasClass( 'p2020-js-loaded' ) ) {\n\t\treturn;\n\t}\n\n\t$( 'body' ).addClass( 'p2020-js-loaded' );\n} )( jQuery );\n","( function( $ ) {\n\t$( document ).ready( () => {\n\t\t// Initialize tippy.js tooltips\n\t\twindow.tippy( '[data-tippy-content]', {\n\t\t\ttheme: 'p2020',\n\t\t\tduration: 100 /* duration for transition animation */,\n\t\t} );\n\t} );\n} )( jQuery );\n","// TODO: Test and clean up for P2020\n\n( function( $ ) {\n\tfunction moveNavIntoSidebar() {\n\t\tconst $menu = $( 'nav#site-navigation' );\n\t\tif ( $menu.length && $menu.parents( 'header#masthead' ).length ) {\n\t\t\t$menu.prependTo( '#sidebar' );\n\t\t\t$menu.wrap(\n\t\t\t\t'<aside class=\"widget\" id=\"o2-responsive-nav\"></aside>'\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction moveNavOutOfSidebar() {\n\t\tconst $menu = $( 'nav#site-navigation' );\n\t\tif ( $menu.length && 0 === $menu.parents( 'header#masthead' ).length ) {\n\t\t\t$( 'nav#site-navigation' ).appendTo( 'header#masthead' );\n\t\t\t$( '#o2-responsive-nav' ).remove();\n\t\t}\n\t}\n\n\t$( document ).ready( function() {\n\t\t$( '[data-mobile-menu-toggle]' ).click( function() {\n\t\t\t$( 'body' ).toggleClass( 'mobile-menu-is-visible' );\n\t\t} );\n\n\t\tif ( 'undefined' !== typeof enquire ) {\n\t\t\t// \"Tablet\" max-width also defined in css/src/global/_variables.scss\n\t\t\tenquire.register( 'screen and (max-width:876px)', {\n\t\t\t\tmatch() {\n\t\t\t\t\tmoveNavIntoSidebar();\n\t\t\t\t},\n\n\t\t\t\tunmatch() {\n\t\t\t\t\tmoveNavOutOfSidebar();\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\t} );\n} )( jQuery );\n","/**\n * Only show the editor footer when the editor is active or has content.\n */\n( function( $ ) {\n\t$( document ).ready( () => {\n\t\t/**\n\t\t * Selectors\n\t\t */\n\t\tconst editor = document.querySelector( '.o2-app-new-post' );\n\t\tif ( editor === null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst $editorFooter = $( '.o2-app-new-post .o2-editor-footer' );\n\t\tconst blockListLayoutSelector = '.block-editor-block-list__layout';\n\t\tconst editorExpandedModifier = 'is-expanded';\n\n\t\t/**\n\t\t * Local Storage Keys\n\t\t */\n\t\tconst newPostContentKey = `${ window._currentSiteId }-new`;\n\n\t\t/**\n\t\t * Functions\n\t\t */\n\t\tconst isEditorEmpty = () => {\n\t\t\tconst editorContent = window.localStorage.getItem(\n\t\t\t\tnewPostContentKey\n\t\t\t);\n\t\t\treturn editorContent === '';\n\t\t};\n\n\t\tconst shouldExpandEditor = () =>\n\t\t\teditor.contains( document.activeElement ) || ! isEditorEmpty();\n\n\t\tconst handleFocusChange = () => {\n\t\t\tif ( shouldExpandEditor() ) {\n\t\t\t\t$editorFooter.show();\n\t\t\t\t$( blockListLayoutSelector ).addClass( editorExpandedModifier );\n\t\t\t} else {\n\t\t\t\t$editorFooter.hide();\n\t\t\t\t$( blockListLayoutSelector ).removeClass(\n\t\t\t\t\teditorExpandedModifier\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Main\n\t\t */\n\t\tif ( isEditorEmpty() ) {\n\t\t\t$editorFooter.hide();\n\t\t}\n\n\t\tif ( editor ) {\n\t\t\teditor.addEventListener( 'focus', handleFocusChange, true );\n\t\t\teditor.addEventListener( 'blur', handleFocusChange, true );\n\t\t}\n\t} );\n} )( jQuery );\n","( function() {\n\t// Enable the fixed toolbar feature if not explicitly disabled\n\tfunction enableFixedToolbarByDefault() {\n\t\tconst rawSettings = window.localStorage.getItem( 'p2tenberg_features' );\n\t\tconst settings = rawSettings ? JSON.parse( rawSettings ) : {};\n\n\t\tif ( settings.fixedToolbar === undefined ) {\n\t\t\twindow.localStorage.setItem(\n\t\t\t\t'p2tenberg_features',\n\t\t\t\tJSON.stringify( {\n\t\t\t\t\t...settings,\n\t\t\t\t\tfixedToolbar: true,\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\t}\n\n\t// No need to wait for document ready\n\tenableFixedToolbarByDefault();\n} )();\n","( function( $ ) {\n\t$( document ).ready( () => {\n\t\tconst $editor = $( '.o2-app-new-post' );\n\t\tconst $controls = $( '[data-p2020-mobile-new-post-controls]' );\n\t\tconst btnNew = $controls.find( 'button' )[ 0 ];\n\t\tconst btnCancel = $controls.find( 'button' )[ 1 ];\n\n\t\t// When user is not logged in\n\t\tif ( $editor.length === 0 ) {\n\t\t\t$controls.hide();\n\t\t\treturn;\n\t\t}\n\n\t\t$editor.before( $controls );\n\t\t$controls.css( 'visibility', 'visible' ); // prevents FOUC before the DOM manipulation\n\n\t\tbtnNew.addEventListener( 'click', () => {\n\t\t\t$editor.slideDown( 'fast' );\n\t\t\t$( btnNew ).hide();\n\t\t\t$( btnCancel ).show();\n\t\t} );\n\n\t\tbtnCancel.addEventListener( 'click', () => {\n\t\t\t$editor.slideUp( 'fast' );\n\t\t\t$( btnCancel ).hide();\n\t\t\t$( btnNew ).show();\n\t\t} );\n\t} );\n} )( jQuery );\n","( function( $ ) {\n\t// Enable \"Notify me of new comments via email\" on new posts by default and hide the form\n\tfunction subscribeToCommentsOnNewPostsByDefault() {\n\t\t$( 'input[type=\"checkbox\"]#post_subscribe' ).prop( 'checked', true );\n\t\t$( '.o2-post-form-options' ).hide();\n\t}\n\n\t$( document ).ready( () => {\n\t\tsubscribeToCommentsOnNewPostsByDefault();\n\t} );\n} )( jQuery );\n","// Polyfills for things that don't need to block the rest of the JS\n\n( function( $ ) {\n\t$( document ).ready( () => {\n\t\t// CSS :focus-visible\n\t\t$.getScript( 'https://unpkg.com/focus-visible' );\n\n\t\t// CSS :focus-within\n\t\tif ( ! Modernizr.focuswithin ) {\n\t\t\t$.getScript( 'https://unpkg.com/focus-within-polyfill' );\n\t\t}\n\t} );\n} )( jQuery );\n","( function( $ ) {\n\tfunction isSinglePage() {\n\t\treturn $( 'body' ).hasClass( 'page' );\n\t}\n\n\t$( document ).ready( function() {\n\t\tif ( isSinglePage() ) {\n\t\t\tconst title = $( '.o2-app-page-title' ).text();\n\t\t\t$( '.entry-header .entry-meta' ).prepend(\n\t\t\t\t$( '<h1 />', {\n\t\t\t\t\tclass: 'entry-title',\n\t\t\t\t\ttext: title,\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\t} );\n} )( jQuery );\n","( function( $ ) {\n\tfunction isInCustomizer() {\n\t\treturn !! wp.customize;\n\t}\n\n\t$( document ).ready( function() {\n\t\t// Is home page and not displaying O2 filtered content\n\t\tif (\n\t\t\tisInCustomizer() ||\n\t\t\t( window.location.pathname === '/' &&\n\t\t\t\twindow.location.search === '' )\n\t\t) {\n\t\t\t$( '.o2-app-page-title' ).addClass( 'is-unfiltered-home' );\n\t\t}\n\t} );\n} )( jQuery );\n"]}